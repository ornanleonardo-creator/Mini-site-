<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Admin</title>
    <style>
        body { font-family: Arial; margin: 0; }
        header { background: #1877f2; color: white; padding: 15px; display: flex; justify-content: space-between; }
        .sidebar { width: 200px; background: #333; color: white; height: 100vh; padding: 20px; position: fixed; }
        .content { margin-left: 220px; padding: 20px; }
        .card { background: white; padding: 20px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { padding: 8px 15px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-primary { background: #1877f2; color: white; }
        .btn-danger { background: #dc3545; color: white; }
    </style>
</head>
<body>
    <header>
        <h2>‚öôÔ∏è Panel Admin</h2>
        <div>
            <span id="user">Admin</span>
            <button onclick="logout()" class="btn-danger">D√©connexion</button>
        </div>
    </header>
    
    <div class="sidebar">
        <h3>Menu</h3>
        <div><a href="#dashboard" onclick="showSection('dashboard')">üìä Dashboard</a></div>
        <div><a href="#articles" onclick="showSection('articles')">üìù Articles</a></div>
        <div><a href="#users" onclick="showSection('users')">üë• Utilisateurs</a></div>
        <div><a href="#settings" onclick="showSection('settings')">‚öôÔ∏è Param√®tres</a></div>
    </div>
    
    <div class="content">
        <!-- Section Dashboard -->
        <div id="dashboard" class="section">
            <h2>Tableau de bord</h2>
            <div class="card">
                <h3>Statistiques</h3>
                <p>Visiteurs aujourd'hui: <strong id="visitors">245</strong></p>
                <p>Articles publi√©s: <strong id="articlesCount">12</strong></p>
                <p>Commentaires: <strong id="comments">8</strong></p>
            </div>
            
            <div class="card">
                <h3>Actions rapides</h3>
                <button class="btn-primary" onclick="newArticle()">Nouvel article</button>
                <button class="btn-primary" onclick="viewStats()">Voir stats</button>
                <button class="btn-primary" onclick="backup()">Sauvegarder</button>
            </div>
        </div>
        
        <!-- Section Articles -->
        <div id="articles" class="section" style="display:none;">
            <h2>Gestion des articles</h2>
            <div class="card">
                <h3>Nouvel article</h3>
                <input type="text" id="articleTitle" placeholder="Titre" style="width: 100%; margin: 5px 0;">
                <textarea id="articleContent" placeholder="Contenu" style="width: 100%; height: 100px; margin: 5px 0;"></textarea>
                <button class="btn-primary" onclick="addArticle()">Publier</button>
            </div>
            
            <div class="card">
                <h3>Articles existants</h3>
                <div id="articlesList">
                    <!-- Articles apparaissent ici -->
                </div>
            </div>
        </div>
        
        <!-- Section Utilisateurs -->
        <div id="users" class="section" style="display:none;">
            <h2>Gestion des utilisateurs</h2>
            <div class="card">
                <table style="width: 100%; border-collapse: collapse;">
                    <tr><th>ID</th><th>Nom</th><th>Email</th><th>Actions</th></tr>
                    <tr><td>1</td><td>Admin</td><td>admin@site.com</td><td><button disabled>Admin</button></td></tr>
                    <tr><td>2</td><td>√âditeur</td><td>editeur@site.com</td><td><button>Modifier</button></td></tr>
                </table>
            </div>
        </div>
    </div>

    <script>
        // V√©rifie la session
        if (!sessionStorage.getItem('admin')) {
            window.location.href = "admin-login.html";
        }
        
        // Charge les donn√©es
        loadArticles();
        
        function showSection(sectionId) {
            // Cache toutes les sections
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            // Affiche la section demand√©e
            document.getElementById(sectionId).style.display = 'block';
        }
        
        function loadArticles() {
            const articles = JSON.parse(localStorage.getItem('articles')) || [
                {id: 1, title: "Bienvenue", content: "Premier article", date: "2024-01-01"}
            ];
            
            const container = document.getElementById('articlesList');
            container.innerHTML = '';
            
            articles.forEach(article => {
                container.innerHTML += `
                    <div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0;">
                        <h4>${article.title}</h4>
                        <p>${article.content}</p>
                        <small>${article.date}</small>
                        <button onclick="deleteArticle(${article.id})">Supprimer</button>
                    </div>
                `;
            });
            
            document.getElementById('articlesCount').textContent = articles.length;
        }
        
        function addArticle() {
            const title = document.getElementById('articleTitle').value;
            const content = document.getElementById('articleContent').value;
            
            if (!title || !content) {
                alert("Veuillez remplir tous les champs");
                return;
            }
            
            const articles = JSON.parse(localStorage.getItem('articles')) || [];
            const newArticle = {
                id: articles.length + 1,
                title: title,
                content: content,
                date: new Date().toLocaleDateString('fr-FR')
            };
            
            articles.push(newArticle);
            localStorage.setItem('articles', JSON.stringify(articles));
            
            // R√©initialise le formulaire
            document.getElementById('articleTitle').value = '';
            document.getElementById('articleContent').value = '';
            
            // Recharge la liste
            loadArticles();
            
            alert("Article ajout√© avec succ√®s !");
        }
        
        function deleteArticle(id) {
            if (confirm("Supprimer cet article ?")) {
                let articles = JSON.parse(localStorage.getItem('articles')) || [];
                articles = articles.filter(a => a.id !== id);
                localStorage.setItem('articles', JSON.stringify(articles));
                loadArticles();
            }
        }
        
        function logout() {
            sessionStorage.removeItem('admin');
            window.location.href = "admin-login.html";
        }
        
        // V√©rifie l'expiration de session toutes les minutes
        setInterval(() => {
            const loginTime = parseInt(sessionStorage.getItem('loginTime'));
            if (Date.now() - loginTime > 60 * 60 * 1000) { // 1 heure
                logout();
            }
        }, 60000);
    </script>
</body>
  </html>
